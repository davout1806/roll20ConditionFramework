<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Fc Conditions By Token Test</title>
    <link rel="stylesheet" href="lib/qunit.css">
    <script src="lib/qunit.js"></script>
    <script src="../libs/underscore.js"></script>
    <script src="../main/testing/Roll20Mock.js"></script>
    <script src="../main/prod/Utils.js"></script>
    <script src="../main/prod/ConditionsByToken.js"></script>
    <script src="../main/prod/ConditionsFc.js"></script>
    <script>

        test("Test: modifier, add condition, modifier, remove condition, modifier", function () {
            var tokenId = "1";

            equal(Davout.ConditionObj.getModifierFor(tokenId, "Str"), 0);
            Davout.ConditionObj.addConditionTo(tokenId, "FatiguedI", "Orc");

            equal(Davout.ConditionObj.getModifierFor(tokenId, "Str"), -2);
            equal(mock.logCallCount(), 1);
            equal(mock.sendChatCount(), 1);
            equal(mock.getLogCall(0), "Added: condition FatiguedI to Orc");
            equal(mock.getSendChat(0), "API:/w gm Condition FatiguedI was added to Orc");

            Davout.ConditionObj.removeConditionFrom(tokenId, "FatiguedI");
            equal(mock.logCallCount(), 2);
            equal(mock.sendChatCount(), 2);
            equal(mock.getLogCall(1), "Removed: condition FatiguedI removed from Orc");
            equal(mock.getSendChat(1), "API:/w gm Condition FatiguedI was removed from Orc");

            equal(Davout.ConditionObj.getModifierFor(tokenId, "Str"), 0);
        });
    </script>
</head>
<body>
<div id="qunit"></div>
<div id="qunit-fixture">

</div>
</body>
</html>